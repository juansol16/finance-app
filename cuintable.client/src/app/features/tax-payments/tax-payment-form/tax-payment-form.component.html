<div class="modal modal-open">
    <div class="modal-overlay" (click)="onCancel()"></div>
    <div class="modal-content w-full max-w-md p-6">
        <h3 class="text-lg font-semibold text-white mb-5">{{ 'TAX_PAYMENT.NEW_PAYMENT_TITLE' | translate }}</h3>
        <form [formGroup]="paymentForm" (ngSubmit)="onSubmit()" class="space-y-4">

            <div>
                <label class="text-xs font-medium text-slate-400 mb-1.5 block">{{ 'TAX_PAYMENT.PERIOD' | translate }}</label>
                <div class="flex gap-2">
                    <select formControlName="periodMonth" class="select select-bordered w-full">
                        <option *ngFor="let m of months" [value]="m">{{ getMonthKey(m) }}</option>
                    </select>
                    <select formControlName="periodYear" class="select select-bordered w-full">
                        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                    </select>
                </div>
            </div>

            <div>
                <label class="text-xs font-medium text-slate-400 mb-1.5 block">{{ 'TAX_PAYMENT.AMOUNT_DUE_MXN' | translate }}</label>
                <input type="number" formControlName="amountDue" class="input input-bordered w-full" placeholder="0.00" step="0.01" min="0" />
                <span *ngIf="paymentForm.get('amountDue')?.invalid && paymentForm.get('amountDue')?.touched"
                    class="text-red-400 text-xs mt-1 block">{{ 'TAX_PAYMENT.AMOUNT_DUE' | translate }} > 0</span>
            </div>

            <div>
                <label class="text-xs font-medium text-slate-400 mb-1.5 block">{{ 'TAX_PAYMENT.DUE_DATE' | translate }}</label>
                <input type="date" formControlName="dueDate" class="input input-bordered w-full" />
            </div>

            <div class="flex gap-3 pt-2">
                <button type="button" class="btn btn-ghost flex-1" (click)="onCancel()" [disabled]="loading">{{ 'COMMON.CANCEL' | translate }}</button>
                <button type="submit" class="btn btn-primary flex-1" [disabled]="loading || paymentForm.invalid">
                    <div *ngIf="loading" class="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"></div>
                    {{ 'COMMON.SAVE' | translate }}
                </button>
            </div>
        </form>
    </div>
</div>
